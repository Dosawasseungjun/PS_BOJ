# [Platinum V] 수열과 어렵지 않은 쿼리 - 31222 

[문제 링크](https://www.acmicpc.net/problem/31222) 

### 성능 요약

메모리: 20780 KB, 시간: 180 ms

### 분류

자료 구조, 세그먼트 트리

### 제출 일자

2024년 5월 21일 15:09:55

### 문제 설명

<p>백준 온라인 저지에는 많은 "수열과 쿼리" 문제가 있습니다. 그러나 그중 대다수는 Diamond 이상의 티어를 가지고 있기에, 흐즈로는 언젠가는 어렵지 않은 "수열과 쿼리" 문제를 내겠다고 다짐하였습니다. 그렇게 탄생한 문제가 이것입니다.</p>

<p>수열의 연속 부분 수열 $[a_l,a_{l+1},a_{l+2},\cdots,a_{r-1},a_r]$에서 모든 원소가 서로 일치할 때, 이러한 구간 $[l,r]$을 수열 $a$의 <strong>연속 일치 구간</strong>이라고 합니다. 또한, 수열 $a$의 어떤 연속 일치 구간이 다른 어떤 $a$의 연속 일치 구간에도 완전히 포함되지 않는다면 이를 수열 $a$의 <strong>중요한 연속 일치 구간</strong>이라고 합니다.</p>

<p>여러분은 인덱스가 $1$부터 시작하는 수열 $A$에 대하여 다음의 쿼리 $q$개를 해결해야 합니다.</p>

<ul>
	<li>$1 \ i \ x$: $A_i$의 값을 $x$로 변경합니다. ($1 \le i,x \le n$)</li>
	<li>$2 \ l \ r$: $B$를 수열의 연속 부분 수열 $[A_l,A_{l+1},A_{l+2},\cdots,A_{r-1},A_r]$로 정의할 때, 수열 $B$의 서로 다른 중요한 연속 일치 구간의 개수를 출력합니다. ($1 \le l \le r \le n$)</li>
</ul>

<p>어렵지 않은 문제죠? 여러분이 느끼기에도 어렵지 않다면 좋겠습니다.</p>

### 입력 

 <p>첫 번째 줄에 수열의 길이 $n$과 쿼리의 개수 $q$가 공백으로 분리되어 주어집니다. ($1 \le n,q \le 2\times 10^5$)</p>

<p>두 번째 줄에 수열 $A$의 원소 $A_1, A_2, \cdots, A_n$이 공백으로 분리되어 주어집니다. ($1 \le A_i \le n$)</p>

<p>그다음 줄부터 총 $q$개의 쿼리가 한 줄에 하나씩 주어집니다. 각 쿼리는 지문에 주어진 종류의 쿼리 중 하나입니다.</p>

<p>모든 입력에서 마지막 쿼리는 $2$번 쿼리임이 보장됩니다.</p>

### 출력 

 <p>각 $2$번 쿼리에 대해 정답을 한 줄에 하나씩 출력합니다.</p>

